<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:OmniScribe.ViewModels"
             x:Class="OmniScribe.Views.HistoryView"
             x:DataType="vm:HistoryViewModel">

    <DockPanel>
        <!-- Header -->
        <Border DockPanel.Dock="Top" Padding="16,16,16,8">
            <DockPanel>
                <TextBlock Text="ðŸ“‹ Cronologia"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="#94A3B8"
                           VerticalAlignment="Center" />
                <Button Content="ðŸ—‘"
                        Command="{Binding ClearHistoryCommand}"
                        ToolTip.Tip="Cancella cronologia"
                        HorizontalAlignment="Right"
                        Classes="icon-button"
                        FontSize="12"
                        Width="28" Height="28" />
            </DockPanel>
        </Border>

        <!-- Sessions List -->
        <ListBox ItemsSource="{Binding Sessions}"
                 SelectedItem="{Binding SelectedSession}"
                 Background="Transparent"
                 BorderThickness="0"
                 Padding="8,0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Padding="12,10"
                            Margin="0,2"
                            CornerRadius="8"
                            Background="#0D1117"
                            Cursor="Hand">
                        <StackPanel Spacing="4">
                            <TextBlock Text="{Binding DisplayName}"
                                       FontSize="12"
                                       FontWeight="Medium"
                                       Foreground="#CBD5E1"
                                       TextTrimming="CharacterEllipsis" />
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="{Binding Timestamp, StringFormat='{}{0:dd/MM/yyyy}'}"
                                           FontSize="10"
                                           Foreground="#475569" />
                                <TextBlock Text="{Binding TokensUsed, StringFormat='{}{0:N0} tok'}"
                                           FontSize="10"
                                           Foreground="#7A5CFF" />
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</UserControl>
